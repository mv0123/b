<aside id="musicPlayer" class="music-player">
  <div class="progress-bar-container" (click)="onProgressClick($event)">
    <div class="progress-bar" [style.width]="progress + '%'"></div>
  </div>

  <div class="player-body">
    <div class="song-details">
      <img *ngIf="label?.image && label.image?.length" [src]="label?.image[0]?.link" alt="Album Art" class="album-art">
      <div class="song-info">
        <h4>{{ label?.name || 'No Song Playing' }}</h4>
        <p>{{ label?.label || 'Unknown Artist' }}</p>
      </div>
    </div>

    <div class="player-controls">
      <button (click)="previousSong()" class="control-btn" [disabled]="!currentSongId">
        <i class="material-icons">skip_previous</i>
      </button>
      <button (click)="togglePlayPause()" class="control-btn"  [disabled]="!currentSongId">
        <i class="material-icons">{{ isPlaying ? 'pause' : 'play_arrow' }}</i>
      </button>
      <button (click)="playNextSong()" class="control-btn" [disabled]="!currentSongId">
        <i class="material-icons">skip_next</i>
      </button>
    </div>

    <div class="time-info">
      <span>{{ formatTime(currentTime) }}</span> / <span>{{ formatTime(duration) }}</span>
    </div>
  </div>

  <audio 
    #audioPlayer 
    autoplay 
    preload="auto" 
    [src]="audioSrc || ''" 
    (ended)="playNextSong()" 
    (timeupdate)="updateProgress()"
    (loadedmetadata)="setDuration()">
  </audio>
</aside>
